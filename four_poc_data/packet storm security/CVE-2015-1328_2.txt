{
    "text": "title : Ubuntu 12.04 / 14.04 / 14.10 / 15.04 overlayfs Local Root  ， detail : The overlayfs filesystem does not correctly check file permissions when creating new files in the upper filesystem directory. This can be exploited by an unprivileged process in kernels with CONFIG_USER_NS=y and where overlayfs has the FS_USERNS_MOUNT flag , which allows the mounting of overlayfs inside unprivileged mount namespaces. This is the default configuration of Ubuntu 12.04 , 14.04 , 14.10 , and 15.04. Included is a full exploit demonstration root code execution.  ， cve : advisories | CVE-2015-1328  ，  ， desc : The overlayfs filesystem does not correctly check file permissions when  ， creating new files in the upper filesystem directory. This can be exploited  ， by an unprivileged process in kernels with CONFIG_USER_NS=y and where  ， overlayfs has the FS_USERNS_MOUNT flag , which allows the mounting of overlayfs  ， inside unprivileged mount namespaces. This is the default configuration of  ， Ubuntu 12.04 , 14.04 , 14.10 , and 15.04 [ 1 ] .  ，   ， If you don't want to update your kernel and you don't use overlayfs , a viable  ， workaround is to just remove or blacklist overlayfs.ko / overlay.ko.  ，   ， Details  ，   ，  ， >From Documentation/filesystems/overlayfs.txt [ 2 ]  :   ，   ， \"Objects that are not directories ( files , symlinks , device-special  ， files etc. ) are presented either from the upper or lower filesystem as  ， appropriate. When a file in the lower filesystem is accessed in a way  ， the requires write-access , such as opening for write access , changing  ， some metadata etc. , the file is first copied from the lower filesystem  ， to the upper filesystem ( copy_up ) .\"  ，   ， The ovl_copy_up_ * functions do not correctly check that the user has  ， permission to write files to the upperdir directory. The only permissions  ， that are checked is if the owner of the file that is being modified has  ， permission to write to the upperdir. Furthermore , when a file is copied from  ， the lowerdir the file metadata is carbon copied , instead of attributes such as  ， owner being changed to the user that triggered the copy_up_ * procedures.",
    "time": "Jun 16, 2015"
}